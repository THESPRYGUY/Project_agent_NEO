{
  "meta": {
    "name": "15_Observability+Telemetry_Spec",
    "version": "v2.0.0",
    "owner": "SRE+CDO",
    "created_at": "2025-09-12T18:52:28Z"
  },
  "objective": "Privacy-aware telemetry schema, dashboards, and alerts for GEN2 agents.",
  "schema_keys": [
    "log_schema",
    "privacy_controls",
    "dashboards",
    "alerts"
  ],
  "token_budget": "â‰¤2000",
  "refs": {
    "global_instructions": "02_Global-Instructions_v2.json",
    "governance": "04_Governance+Risk-Register_v2.json",
    "safety_privacy": "05_Safety+Privacy_Guardrails_v2.json",
    "kpi_framework": "14_KPI+Evaluation-Framework_v2.json",
    "footprints_spec": "16_Reasoning-Footprints_Schema_v1.json"
  },
  "log_schema": {
    "task_event": [
      "timestamp",
      "agent_id",
      "task_id",
      "role",
      "archetype",
      "strategy_profile",
      "strategy_chain",
      "risk_tier",
      "tokens_input",
      "tokens_output",
      "latency_ms",
      "tool_calls",
      "cost_estimate_usd",
      "citations_count",
      "kpi_local_PRI",
      "kpi_local_HAL",
      "kpi_local_AUD",
      "strategy_metrics",
      "hitl_required",
      "hitl_actor",
      "status",
      "error_code"
    ],
    "rag_event": [
      "timestamp",
      "query_hash",
      "index_id",
      "hits",
      "latency_ms",
      "reranker_used",
      "passages_returned",
      "tokens_saved_cached"
    ],
    "reasoning_event": [
      "timestamp",
      "agent_id",
      "task_id",
      "footprint_id",
      "rti",
      "cord",
      "cona",
      "rfg",
      "reflection_loops",
      "debate_participants"
    ],
    "strategy_invocation": [
      "timestamp",
      "agent_id",
      "workflow_id",
      "task_id",
      "strategy_profile",
      "strategy_chain",
      "task_type",
      "risk_tier",
      "token_count",
      "latency_ms",
      "pri_score",
      "hal_score",
      "aud_score",
      "hitl_required",
      "hitl_actor",
      "status"
    ]
  },
  "privacy_controls": {
    "no_content_logging": true,
    "pii_in_logs": "forbidden",
    "selectors_only": [
      "hash_ids",
      "counts",
      "scores"
    ],
    "jurisdiction_overrides_ref": "05_Safety+Privacy_Guardrails_v2.json#jurisdictional_rules"
  },
  "dashboards": {
    "exec_overview": [
      "ADR",
      "PRI",
      "HAL",
      "AUD",
      "LAT_p95",
      "CST",
      "INC",
      "industry_autofix_count",
      "industry_autofix_pct"
    ],
    "reliability_sre": [
      "pipeline_success_rate",
      "error_code_breakdown",
      "latency_p50_p95",
      "tool_error_rates"
    ],
    "reasoning_quality": [
      "RTI",
      "CORD",
      "CONA",
      "RFG",
      "reflection_loops",
      "debate_usage_rate"
    ],
    "compliance_view": [
      "AUD",
      "INC",
      "exceptions_open",
      "time_to_close_incidents",
      "industry_autofix_count",
      "industry_autofix_pct"
    ],
    "strategy_observability": [
      "avg_PRI_by_strategy_profile",
      "avg_HAL_by_strategy_profile",
      "avg_AUD_by_strategy_profile",
      "token_p95_by_strategy_chain",
      "latency_p95_by_strategy_profile",
      "hitl_activation_rate_by_profile"
    ]
  },
  "alerts": {
    "p1": [
      "pipeline_fail_rate>1%",
      "HAL>0.02",
      "AUD<0.90",
      "incident_S2_or_higher",
      "strategy_profile(regulatory_high_complex).hal_score>0.02_for_3_events"
    ],
    "p2": [
      "LAT_p95>15000ms",
      "PRI<0.95",
      "cost_budget_exceeded",
      "strategy_profile(governance_incident_high).hal_score>0.02_for_2_events",
      "strategy_chain(ReActPattern_v1+HallucinationCheck_v1).latency_ms_p95>20000",
      "token_count_outlier_by_strategy_profile>3sigma"
    ]
  },
  "storage": {
    "episodic_scope": "episodic:telemetry/*",
    "retention_days": 365,
    "export": [
      "csv",
      "parquet_optional"
    ]
  },
  "events": [
    {
      "name": "industry_autofix",
      "description": "NAICS autofill emitted when slot-19 canonical_industry+industry_source are auto-populated for an overlay pack.",
      "severity": "info",
      "metrics": [
        "industry_autofix_count",
        "industry_autofix_pct"
      ],
      "fields": [
        "overlay_pack_id",
        "persona_id",
        "naics_codes",
        "autofill_method",
        "autofill_outcome"
      ]
    },
    {
      "name": "strategy_invocation",
      "description": "Emitted whenever a workflow executes a strategy_chain with KPI deltas and HITL context.",
      "severity": "info",
      "metrics": [
        "strategy_invocations",
        "pri_score",
        "hal_score",
        "aud_score",
        "token_count",
        "latency_ms",
        "hitl_activation_rate"
      ],
      "fields": [
        "timestamp",
        "agent_id",
        "workflow_id",
        "task_id",
        "strategy_profile",
        "strategy_chain",
        "task_type",
        "risk_tier",
        "token_count",
        "latency_ms",
        "pri_score",
        "hal_score",
        "aud_score",
        "hitl_required",
        "hitl_actor",
        "status"
      ],
      "examples": [
        {
          "strategy_profile": "regulatory_high_complex",
          "strategy_chain": [
            "CAPEConversation_v1",
            "AtomDecompose_v1",
            "ChainVerification_v1",
            "HallucinationCheck_v1",
            "CertaintyReporter_v1"
          ],
          "task_type": "regulatory_filing",
          "risk_tier": "high",
          "token_count": 1834,
          "latency_ms": 4800,
          "pri_score": 0.97,
          "hal_score": 0.01,
          "aud_score": 0.95,
          "hitl_required": true,
          "hitl_actor": "regulatory_counsel",
          "status": "completed"
        },
        {
          "strategy_profile": "governance_incident_high",
          "strategy_chain": [
            "ReActPattern_v1",
            "DisinfoFilter_v1",
            "HallucinationCheck_v1",
            "CertaintyReporter_v1"
          ],
          "task_type": "incident_postmortem",
          "risk_tier": "high",
          "token_count": 1420,
          "latency_ms": 7200,
          "pri_score": 0.93,
          "hal_score": 0.018,
          "aud_score": 0.92,
          "hitl_required": true,
          "hitl_actor": "incident_commander",
          "status": "hitl_pending"
        }
      ]
    }
  ]
}
