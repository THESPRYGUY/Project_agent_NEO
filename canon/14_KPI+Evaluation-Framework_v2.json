{
  "meta": {
    "name": "14_KPI+Evaluation-Framework",
    "version": "v2.0.0",
    "owner": "Evaluator",
    "created_at": "2025-09-12T18:48:34Z"
  },
  "objective": "Portable KPIs and structured evaluation suites for GEN2, including Reasoning KPIs.",
  "schema_keys": [
    "kpis",
    "metrics",
    "benchmarks",
    "reasoning_kpis",
    "strategy_kpis"
  ],
  "token_budget": "\u22642500",
  "refs": {
    "role_index": "06_Role-Recipes_Index_v2.json",
    "global_instructions": "02_Global-Instructions_v2.json",
    "governance": "04_Governance+Risk-Register_v2.json",
    "workflow_pack": "11_Workflow-Pack_v2.json",
    "reporting_pack": "18_Reporting-Pack_v2.json"
  },
  "terms": {
    "PRI": "Plan/Reason Integrity \u2014 required tests passed across functional+governance suites",
    "HAL": "Hallucination rate \u2014 share of factual claims failing verification",
    "AUD": "Audit pass rate \u2014 privacy/safety/policy checks",
    "ADR": "Answer Directness Rate \u2014 percent of responses that directly address the query",
    "RTI": "Reasoning Transparency Index \u2014 derived from sanitized Reasoning Footprints",
    "CORD": "Chain-of-Reasoning Depth \u2014 structured step depth achieved vs planned",
    "CONA": "Consensus Accuracy \u2014 debate loop agreement vs ground truth",
    "RFG": "Reflection Gain \u2014 error reduction after reflection",
    "LAT": "Latency p50/p95 \u2014 end-to-end completion time percentiles",
    "CST": "Cost per 1k tokens \u2014 effective cost rate",
    "COV": "Test coverage ratio \u2014 capabilities with \u22651 test / total capabilities",
    "RST": "Regression Stability \u2014 percent of outputs within tolerance vs baseline",
    "INC": "Incident rate (severity-weighted) \u2014 weighted incidents per 100 tasks"
  },
  "kpis": [
    {
      "id": "ADR",
      "name": "Answer Directness Rate",
      "target": ">=0.95",
      "collection": {
        "source": "telemetry",
        "window_days": 14
      }
    },
    {
      "id": "PRI",
      "name": "Plan/Reason Integrity",
      "target": ">=0.95",
      "collection": {
        "source": "eval_results",
        "window_days": 14
      }
    },
    {
      "id": "HAL",
      "name": "Hallucination Rate",
      "target": "<=0.02",
      "collection": {
        "source": "factcheck",
        "window_days": 14
      }
    },
    {
      "id": "AUD",
      "name": "Audit Pass Rate",
      "target": ">=0.90",
      "collection": {
        "source": "governance_tests",
        "window_days": 14
      }
    },
    {
      "id": "LAT",
      "name": "Latency p50/p95 (ms)",
      "target": {
        "p50": "<=5000",
        "p95": "<=15000"
      },
      "collection": {
        "source": "telemetry",
        "window_days": 7
      }
    },
    {
      "id": "CST",
      "name": "Cost per 1k tokens",
      "target": "<=policy_budget",
      "collection": {
        "source": "telemetry+pricing",
        "window_days": 14
      }
    },
    {
      "id": "COV",
      "name": "Test Coverage Ratio",
      "target": ">=0.80",
      "collection": {
        "source": "eval_matrix",
        "window_days": 30
      }
    },
    {
      "id": "RST",
      "name": "Regression Stability",
      "target": ">=0.95",
      "collection": {
        "source": "change_regression",
        "window_days": 14
      }
    },
    {
      "id": "INC",
      "name": "Incident Rate (severity-weighted)",
      "target": "<=5",
      "collection": {
        "source": "incident_log",
        "window_days": 30
      }
    }
  ],
  "reasoning_kpis": [
    {
      "id": "RTI",
      "name": "Reasoning Transparency Index",
      "target": ">=0.85",
      "collection": {
        "source": "footprints",
        "window_days": 14
      }
    },
    {
      "id": "CORD",
      "name": "CoR Depth Score",
      "target": ">=0.80",
      "collection": {
        "source": "eval_results",
        "window_days": 14
      }
    },
    {
      "id": "CONA",
      "name": "Consensus Accuracy",
      "target": ">=0.90",
      "collection": {
        "source": "debate_consensus",
        "window_days": 14
      }
    },
    {
      "id": "RFG",
      "name": "Reflection Gain",
      "target": ">=0.20",
      "collection": {
        "source": "reflection_microloops",
        "window_days": 14
      }
    }
  ],
  "strategy_kpis": {
    "strategy_metrics": {
      "AtomDecompose_v1": {
        "PRI": "increase",
        "HAL": "decrease",
        "AUD": "increase",
        "notes": "Structured decomposition reduces reasoning jumps and surfaces gaps for review."
      },
      "ChainVerification_v1": {
        "PRI": "increase",
        "HAL": "decrease",
        "AUD": "increase",
        "notes": "Multi-hop verification tightens factual accuracy for regulatory work."
      },
      "ChainFeedback_v1": {
        "PRI": "increase",
        "HAL": "neutral",
        "AUD": "increase",
        "notes": "Feedback loop improves plan adherence; requires telemetry on delta between iterations."
      },
      "FactoredChecklist_v1": {
        "PRI": "increase",
        "HAL": "neutral",
        "AUD": "increase",
        "notes": "Checklist ensures coverage of compliance steps before completion."
      },
      "DensityCompression_v1": {
        "PRI": "neutral",
        "HAL": "neutral",
        "AUD": "increase",
        "notes": "Compression must cite sources; primary value is audit traceability."
      },
      "CAPEConversation_v1": {
        "PRI": "increase",
        "HAL": "neutral",
        "AUD": "increase",
        "notes": "Persona-led interviews surface missing context while keeping transcripts auditable."
      },
      "ReActPattern_v1": {
        "PRI": "increase",
        "HAL": "neutral",
        "AUD": "decrease",
        "notes": "Tool-augmented reasoning can drift; pair with HallucinationCheck_v1 for every high-risk profile."
      },
      "ReflexiveReview_v1": {
        "PRI": "increase",
        "HAL": "decrease",
        "AUD": "increase",
        "notes": "Reflection cycles reduce regression escape and improve audit notes."
      },
      "PersonaDebate_v1": {
        "PRI": "increase",
        "HAL": "neutral",
        "AUD": "increase",
        "notes": "Debate outputs require HITL; telemetry tracks delta between personas."
      },
      "HallucinationCheck_v1": {
        "PRI": "neutral",
        "HAL": "decrease",
        "AUD": "increase",
        "notes": "Fact-check module drives HAL toward <=0.02 and logs evidence references."
      },
      "DisinfoFilter_v1": {
        "PRI": "neutral",
        "HAL": "decrease",
        "AUD": "increase",
        "notes": "Always-on content filter for medium/high risk; no allowed degradation."
      },
      "CertaintyReporter_v1": {
        "PRI": "increase",
        "HAL": "neutral",
        "AUD": "increase",
        "notes": "Confidence statements must include evidence_count and route to HITL when certainty>0.9."
      }
    },
    "profile_targets": {
      "regulatory_high_complex": {
        "PRI_min": 0.95,
        "HAL_max": 0.02,
        "AUD_min": 0.9,
        "expected_strategies": [
          "AtomDecompose_v1",
          "ChainVerification_v1",
          "HallucinationCheck_v1",
          "CertaintyReporter_v1"
        ]
      },
      "governance_incident_high": {
        "PRI_min": 0.95,
        "HAL_max": 0.02,
        "AUD_min": 0.9,
        "expected_strategies": [
          "ReActPattern_v1",
          "HallucinationCheck_v1",
          "DisinfoFilter_v1",
          "CertaintyReporter_v1"
        ]
      },
      "research_rag_medium": {
        "PRI_min": 0.9,
        "HAL_max": 0.03,
        "AUD_min": 0.9,
        "expected_strategies": [
          "AtomDecompose_v1",
          "ChainVerification_v1",
          "DisinfoFilter_v1",
          "HallucinationCheck_v1"
        ]
      }
    },
    "enforcement": [
      {
        "strategy_profile": "regulatory_high_complex",
        "thresholds": {
          "PRI_min": 0.95,
          "HAL_max": 0.02,
          "AUD_min": 0.9
        },
        "on_breach": "Trigger HITL plus legal counsel sign-off before deliverable release.",
        "telemetry_ref": "15_Observability+Telemetry_Spec_v2.json#alerts"
      },
      {
        "strategy_profile": "governance_incident_high",
        "thresholds": {
          "PRI_min": 0.95,
          "HAL_max": 0.02,
          "AUD_min": 0.9
        },
        "on_breach": "Route to incident commander and freeze automation until remediation.",
        "telemetry_ref": "15_Observability+Telemetry_Spec_v2.json#dashboards"
      },
      {
        "strategy_profile": "research_rag_medium",
        "thresholds": {
          "PRI_min": 0.9,
          "HAL_max": 0.03,
          "AUD_min": 0.9
        },
        "on_breach": "Require secondary reviewer before publishing internal research memo.",
        "telemetry_ref": "15_Observability+Telemetry_Spec_v2.json#dashboards"
      }
    ]
  },
  "benchmarks": {
    "suite_defs": [
      {
        "id": "functional",
        "description": "Task-specific correctness and contract adherence"
      },
      {
        "id": "governance",
        "description": "Privacy, safety, policy compliance"
      },
      {
        "id": "red_team",
        "description": "Prompt injection, jailbreak and bias probes"
      },
      {
        "id": "reasoning_quality",
        "description": "CoR depth, SoT clarity, consensus accuracy, reflection gain"
      },
    {
      "id": "latency_cost",
      "description": "Latency and cost under realistic loads"
    },
    {
      "id": "strategy_assurance",
      "description": "Validates strategy/profile KPI deltas and HITL escalation wiring"
    },
    {
      "id": "strategy_eval_suite",
      "description": "Compare strategy profiles on key scenarios using PRI/HAL/AUD and runtime metrics.",
      "scenarios": [
        "steelport_vpp_scenario",
        "drac_pricing_case",
        "generic_regulatory_memo"
      ]
    }
  ],
  "matrices": [
    {
      "id": "baseline",
        "suites": [
          "functional",
          "governance",
          "red_team",
          "reasoning_quality",
          "strategy_assurance"
        ]
      },
      {
        "id": "change_regression",
        "suites": [
          "functional",
          "governance",
          "reasoning_quality",
          "latency_cost"
        ]
      },
      {
        "id": "strategy_profile_weekly",
        "suites": [
          "strategy_assurance",
          "governance",
          "latency_cost"
        ]
      },
      {
        "id": "strategy_eval_suite",
        "scenarios": [
          {
            "scenario_id": "steelport_vpp_scenario",
            "strategy_profiles": [
              "analysis_medium_internal",
              "regulatory_high_complex"
            ],
            "kpi_targets": {
              "PRI_min": 0.95,
              "HAL_max": 0.02,
              "AUD_min": 0.9,
              "token_count_p95_max": 3500,
              "latency_ms_p95_max": 6500
            }
          },
          {
            "scenario_id": "drac_pricing_case",
            "strategy_profiles": [
              "analysis_medium_internal",
              "research_rag_medium"
            ],
            "kpi_targets": {
              "PRI_min": 0.94,
              "HAL_max": 0.025,
              "AUD_min": 0.88,
              "token_count_p95_max": 3200,
              "latency_ms_p95_max": 6000
            }
          },
          {
            "scenario_id": "generic_regulatory_memo",
            "strategy_profiles": [
              "regulatory_high_complex",
              "governance_incident_high"
            ],
            "kpi_targets": {
              "PRI_min": 0.96,
              "HAL_max": 0.015,
              "AUD_min": 0.92,
              "token_count_p95_max": 3600,
              "latency_ms_p95_max": 7000
            }
          }
        ]
      }
    ]
  },
  "suites": {
    "functional": {
      "kpis": [
        "PRI",
        "ADR",
        "RST"
      ]
    },
    "governance": {
      "kpis": [
        "AUD",
        "INC"
      ]
    },
    "red_team": {
      "kpis": [
        "PRI",
        "AUD",
        "INC"
      ]
    },
    "reasoning_quality": {
      "kpis": [
        "PRI",
        "RTI",
        "CORD",
        "CONA",
        "RFG"
      ]
    },
    "latency_cost": {
      "kpis": [
        "LAT",
        "CST"
      ]
    },
    "strategy_eval_suite": {
      "kpis": [
        "PRI",
        "HAL",
        "AUD"
      ],
      "telemetry_metrics": [
        "token_count",
        "latency_ms"
      ],
      "notes": "Used for scenario-level comparisons between strategy profiles."
    }
  },
  "gates": {
    "activation": {
      "PRI_min": 0.95,
      "HAL_max": 0.02,
      "AUD_min": 0.9
    },
    "change": {
      "require_regression": true,
      "no_severity_downgrade": true,
      "allow_latency_increase_pct": 10
    },
    "profile_enforcement": [
      {
        "strategy_profile": "regulatory_high_complex",
        "thresholds_ref": "strategy_kpis.profile_targets.regulatory_high_complex",
        "action": "Auto-HITL plus regulatory counsel approval required when PRI/HAL/AUD drift outside thresholds."
      },
      {
        "strategy_profile": "governance_incident_high",
        "thresholds_ref": "strategy_kpis.profile_targets.governance_incident_high",
        "action": "Freeze automation and require incident commander review on KPI breach."
      },
      {
        "strategy_profile": "research_rag_medium",
        "thresholds_ref": "strategy_kpis.profile_targets.research_rag_medium",
        "action": "Route to secondary reviewer and re-run HallucinationCheck_v1 before sharing."
      },
      {
        "scenario_id": "steelport_vpp_scenario",
        "strategy_profile": "analysis_medium_internal",
        "thresholds": {
          "PRI_min": 0.95,
          "HAL_max": 0.02,
          "AUD_min": 0.9,
          "token_count_p95_max": 3500,
          "latency_ms_p95_max": 6500
        },
        "action": "Monitor VPP analysis strategy performance; escalate to regulatory_high_complex if thresholds breach."
      },
      {
        "scenario_id": "steelport_vpp_scenario",
        "strategy_profile": "regulatory_high_complex",
        "thresholds": {
          "PRI_min": 0.96,
          "HAL_max": 0.018,
          "AUD_min": 0.92,
          "token_count_p95_max": 3600,
          "latency_ms_p95_max": 7000
        },
        "action": "Require CAIO review before delivering VPP memo if thresholds breach."
      },
      {
        "scenario_id": "drac_pricing_case",
        "strategy_profile": "analysis_medium_internal",
        "thresholds": {
          "PRI_min": 0.94,
          "HAL_max": 0.025,
          "AUD_min": 0.88,
          "token_count_p95_max": 3200,
          "latency_ms_p95_max": 6000
        },
        "action": "Flag DRAC pricing drift; consider research_rag_medium reruns."
      },
      {
        "scenario_id": "drac_pricing_case",
        "strategy_profile": "research_rag_medium",
        "thresholds": {
          "PRI_min": 0.95,
          "HAL_max": 0.02,
          "AUD_min": 0.9,
          "token_count_p95_max": 3400,
          "latency_ms_p95_max": 6200
        },
        "action": "Trigger HITL if pricing memo breaches KPI thresholds."
      },
      {
        "scenario_id": "generic_regulatory_memo",
        "strategy_profile": "regulatory_high_complex",
        "thresholds": {
          "PRI_min": 0.96,
          "HAL_max": 0.015,
          "AUD_min": 0.92,
          "token_count_p95_max": 3600,
          "latency_ms_p95_max": 7000
        },
        "action": "Require legal HITL for memo before release when KPIs slip."
      },
      {
        "scenario_id": "generic_regulatory_memo",
        "strategy_profile": "governance_incident_high",
        "thresholds": {
          "PRI_min": 0.95,
          "HAL_max": 0.02,
          "AUD_min": 0.9,
          "token_count_p95_max": 3800,
          "latency_ms_p95_max": 7500
        },
        "action": "Escalate to incident commander if regulatory memo KPIs breach."
      }
    ]
  },
  "runner": {
    "config_refs": {
      "workflow_pack": "11_Workflow-Pack_v2.json"
    },
    "result_write_scope": "episodic:eval/*",
    "report_target": "18_Reporting-Pack_v2.json#Technical_Eval_Report"
  },
  "definition_of_done": [
    "KPIs defined with targets and collection methods",
    "Reasoning KPIs included and mapped to suites",
    "Activation and change gates specified",
    "Benchmarks and runner config provided"
  ]
}
