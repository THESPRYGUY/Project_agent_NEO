{
  "definition_of_done": [
    "Retention, retrieval, and safety rules established",
    "Schemas saved and referenced",
    "Scope patterns and permissions defined",
    "Stubs provided for immediate use",
    "Writeback and hydration procedures documented"
  ],
  "footprint_refs": {
    "linking_rules": [
      "Do not include raw chain-of-thought; store only sanitized summaries per spec",
      "Each procedural step MAY link to one or more Reasoning Footprints IDs"
    ],
    "spec": "16_Reasoning-Footprints_Schema_v1.json"
  },
  "hydration": {
    "safety": [
      "Filter by classification and pii_flags before retrieval",
      "Mask PII/PHI where required; escalate on conflict"
    ],
    "task_match": [
      "Apply recency bias for episodic; authority for semantic; version pinning for procedural",
      "Down-select to token budget with summarisation before injection",
      "Match by scope patterns and tags"
    ]
  },
  "id": "memory_schema_v2",
  "initial_memory_packs": [
    {
      "id": "cfia_usda_food_safety_refs_v1",
      "scope": "semantic"
    },
    {
      "id": "poultry_microbio_glossary_v1",
      "scope": "semantic"
    },
    {
      "id": "turkey_process_SOPs_v1",
      "scope": "procedural"
    }
  ],
  "memory_scopes": [
    "episodic:self/*",
    "episodic:eval/*",
    "procedural:policy/*",
    "semantic:index/*"
  ],
  "meta": {
    "agent_id": "AGT-112330-TURKEY-RND-0001",
    "authors": [
      "CAIO",
      "CPA",
      "TeamLead"
    ],
    "created_at": "1970-01-01T00:00:00Z",
    "name": "08_Memory-Schema_v2.json",
    "owner": "CDO",
    "version": "v2.0.0"
  },
  "objective": "Industry-agnostic memory architecture with Reasoning Footprints anchors for GEN2.",
  "optional_packs": [],
  "packs": {
    "initial": [
      {
        "id": "cfia_usda_food_safety_refs_v1",
        "scope": "semantic"
      },
      {
        "id": "poultry_microbio_glossary_v1",
        "scope": "semantic"
      },
      {
        "id": "turkey_process_SOPs_v1",
        "scope": "procedural"
      }
    ],
    "optional": []
  },
  "permissions": {
    "notes": "Cross-scope writes require PMO approval; policy edits require CAIO/CISO sign-off",
    "roles": {
      "Agent": {
        "read": [
          "episodic:self/*",
          "procedural:*",
          "semantic:*"
        ],
        "write": [
          "episodic:self/*",
          "procedural:builds/*"
        ]
      },
      "CAIO": {
        "read": [
          "episodic:*",
          "procedural:*",
          "semantic:*"
        ],
        "write": [
          "episodic:exec/*",
          "procedural:*",
          "semantic:policy/*"
        ]
      },
      "CDO/SRE": {
        "read": [
          "episodic:*",
          "procedural:*",
          "semantic:*"
        ],
        "write": [
          "episodic:telemetry/*",
          "procedural:observability/*",
          "semantic:index/*"
        ]
      },
      "CISO/Legal": {
        "read": [
          "episodic:*",
          "procedural:policy/*"
        ],
        "write": [
          "episodic:exceptions/*",
          "procedural:policy/*"
        ]
      },
      "COO/PMO": {
        "read": [
          "episodic:projects/*",
          "procedural:*",
          "semantic:*"
        ],
        "write": [
          "episodic:projects/*",
          "procedural:ops/*"
        ]
      },
      "CPA": {
        "read": [
          "episodic:eval/*",
          "procedural:*",
          "semantic:*"
        ],
        "write": [
          "episodic:eval/*",
          "procedural:prompt-guides/*"
        ]
      },
      "Evaluator": {
        "read": [
          "episodic:eval/*",
          "semantic:policy/*"
        ],
        "write": [
          "episodic:eval/*"
        ]
      }
    }
  },
  "principles": {
    "redact_pii": true
  },
  "quality_controls": {
    "audit_fields": [
      "actor",
      "change_reason",
      "created_at",
      "updated_at"
    ],
    "freshness_days_warn": 365,
    "min_source_quality": "authoritative_or_better",
    "required_fields": [
      "hash",
      "sources",
      "summary",
      "title"
    ]
  },
  "redaction": {},
  "retention": {
    "episodic": {
      "retention_days": 180
    },
    "procedural": {
      "retention_days": 730
    },
    "semantic": {
      "retention_days": 365
    }
  },
  "retrieval": {
    "caching": {
      "enable": true,
      "ttl_minutes": 60
    },
    "chunking": {
      "max_tokens": 600,
      "overlap_tokens": 100
    },
    "embedding": {
      "dim": "auto",
      "index": "vector_index_v2",
      "model_ref": "EMBEDDING_OpenAI"
    },
    "filters": {
      "classification_max": "confidential",
      "exclude_flags": [
        "minor_data"
      ]
    },
    "search": {
      "lambda": 0.5,
      "mmr": true,
      "recency_bias_days": 180,
      "top_k": 6
    },
    "strategy": [
      "hybrid",
      "keyword",
      "rerank_on_demand"
    ]
  },
  "schema_keys": [
    "definition_of_done",
    "footprint_refs",
    "hydration",
    "id",
    "initial_memory_packs",
    "memory_scopes",
    "meta",
    "objective",
    "optional_packs",
    "packs",
    "permissions",
    "principles",
    "quality_controls",
    "redaction",
    "retention",
    "retrieval",
    "scope_patterns",
    "scopes",
    "storage",
    "stubs",
    "sync",
    "token_budget",
    "types",
    "version",
    "writeback_rules"
  ],
  "scope_patterns": [
    "episodic:projects/<project_id>/<YYYY-MM-DD>/<event_id>",
    "procedural:playbook/<name>/vX.Y",
    "procedural:policy/<name>/vX.Y",
    "semantic:domain/<topic>/<slug>",
    "semantic:index/<name>"
  ],
  "scopes": [],
  "storage": {},
  "stubs": {
    "episodic_event": {
      "actor": "Evaluator",
      "classification": "internal",
      "created_at": "2025-09-12T00:00:00Z",
      "id": "ep-2025-09-12-001",
      "key": "episodic:projects/gen2/2025-09-12/ep-001",
      "metrics": {
        "audit_score": 0.93,
        "hallucination_rate": 0.015,
        "pri": 0.96
      },
      "pii_flags": [
        "none"
      ],
      "refs": [
        "14_KPI+Evaluation-Framework_v2.json"
      ],
      "summary": "PRI=0.96, HAL=0.015, AUD=0.93",
      "title": "Baseline evaluation run",
      "updated_at": "2025-09-12T00:00:00Z"
    },
    "procedural_item": {
      "actor": "COO/PMO",
      "classification": "internal",
      "created_at": "2025-09-12T00:00:00Z",
      "id": "proc-0001",
      "key": "procedural:playbook/onboarding/v2.0",
      "pii_flags": [
        "none"
      ],
      "steps": [
        "Insert node+edges in OrgGraph; open ASUP",
        "Seed memory; attach prompts; run baseline evaluation; register telemetry",
        "Validate Agent_Manifest against schema"
      ],
      "summary": "Register new agent, seed minimal memory, attach prompts, run baseline eval, register telemetry.",
      "title": "Agent Onboarding Playbook",
      "updated_at": "2025-09-12T00:00:00Z",
      "version": "v2.0"
    },
    "semantic_item": {
      "actor": "CPA",
      "classification": "internal",
      "content": "Short entries A\u2013Z with links to canonical references.",
      "created_at": "2025-09-12T00:00:00Z",
      "hash": "blake3:6dbee96d4ef90af0d3cbb664f645dd5bb58b2f9b2585fa1313dcd95263c8799e",
      "id": "sem-0001",
      "key": "semantic:domain/general/ai-glossary",
      "pii_flags": [
        "none"
      ],
      "sources": [
        {
          "title": "curated",
          "url": "about:blank"
        }
      ],
      "summary": "Concise definitions of common AI terms for cross-team alignment.",
      "tags": [
        "foundation",
        "glossary"
      ],
      "title": "AI Glossary (core terms)",
      "updated_at": "2025-09-12T00:00:00Z"
    }
  },
  "sync": {
    "allowed_sources": []
  },
  "token_budget": {
    "max_output_tokens": 1000
  },
  "types": {
    "episodic": "Time-stamped events (decisions, evaluations, incidents, releases)",
    "procedural": "Policies, playbooks, SOPs, contracts, templates (versioned)",
    "semantic": "Long-lived knowledge (facts, glossaries, indexes, embeddings refs)"
  },
  "version": 2,
  "writeback_rules": [
    "All writes validate against corresponding JSON Schemas; log result to episodic memory",
    "Include actor, change_reason, sources, checksum (e.g., blake3) on updates",
    "Reject duplicate content unless explicitly version-bumped"
  ]
}
