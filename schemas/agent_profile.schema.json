{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.com/schemas/agent_profile.schema.json",
  "title": "Agent Profile",
  "type": "object",
  "required": ["agent", "toolsets", "attributes", "preferences"],
  "additionalProperties": true,
  "properties": {
    "agent": {
      "type": "object",
      "required": ["name", "version"],
      "properties": {
        "name": {"type": "string", "minLength": 1},
        "version": {"type": "string", "minLength": 1},
        "persona": {"type": "string"},
        "domain": {"type": "string"},
        "role": {"type": "string"},
        "domain_selector": {
          "type": "object",
          "required": ["topLevel", "subdomain", "tags"],
          "properties": {
            "topLevel": {
              "type": "string",
              "enum": [
                "Strategic Functions",
                "Sector Domains",
                "Technical Domains",
                "Support Domains"
              ]
            },
            "subdomain": {
              "type": "string",
              "minLength": 1
            },
            "tags": {
              "type": "array",
              "items": {"type": "string", "minLength": 1},
              "uniqueItems": false
            },
            "naics": {
              "type": "object",
              "required": ["code", "title", "level", "version", "path"],
              "properties": {
                "code": {"type": "string", "pattern": "^[0-9]{2,6}$"},
                "title": {"type": "string", "minLength": 1},
                "level": {"type": "integer", "minimum": 1, "maximum": 6},
                "version": {"type": "string"},
                "path": {
                  "type": "array",
                  "items": {"type": "string", "pattern": "^[0-9]{2,6}$"},
                  "minItems": 1
                }
              },
              "additionalProperties": false
            }
          },
          "allOf": [
            {
              "if": {
                "properties": { "topLevel": { "const": "Sector Domains" } }
              },
              "then": {
                "required": ["naics"],
                "properties": {
                  "naics": {"type": "object"}
                }
              }
            }
          ],
          "additionalProperties": false
        },
        "mbti": {"type": "object"}
      },
      "additionalProperties": true
    },
    "toolsets": {
      "type": "object",
      "properties": {
        "selected": {"type": "array", "items": {"type": "string"}},
        "custom": {"type": "array", "items": {"type": "string"}}
      },
      "additionalProperties": true
    },
    "attributes": {
      "type": "object",
      "properties": {
        "selected": {"type": "array", "items": {"type": "string"}},
        "custom": {"type": "array", "items": {"type": "string"}}
      },
      "additionalProperties": true
    },
    "preferences": {
      "type": "object",
      "properties": {
        "sliders": {
          "type": "object",
          "properties": {
            "autonomy": {"type": "integer", "minimum": 0, "maximum": 100},
            "confidence": {"type": "integer", "minimum": 0, "maximum": 100},
            "collaboration": {"type": "integer", "minimum": 0, "maximum": 100}
          },
          "additionalProperties": true
        },
        "communication_style": {"type": "string"},
        "collaboration_mode": {"type": "string"}
      },
      "additionalProperties": true
    },
    "linkedin": {"type": "object"},
    "notes": {"type": "string"}
    ,
    "classification": {
      "type": "object",
      "properties": {
        "naics": {
          "type": "object",
          "required": ["code", "title", "level", "lineage"],
          "properties": {
            "code": {"type": "string", "pattern": "^[0-9]{2,6}$"},
            "title": {"type": "string", "minLength": 1},
            "level": {"type": "integer", "minimum": 1, "maximum": 6},
            "lineage": {
              "type": "array",
              "items": {
                "type": "object",
                "required": ["code"],
                "properties": {
                  "code": {"type": "string", "pattern": "^[0-9]{2,6}$"},
                  "title": {"type": "string"},
                  "level": {"type": "integer"}
                },
                "additionalProperties": true
              },
              "minItems": 1
            }
          },
          "additionalProperties": true
        },
        "function": {
          "type": "object",
          "required": ["category"],
            "properties": {
              "category": {"type": "string", "minLength": 1},
              "specialties": {
                "type": "array",
                "items": {"type": "string", "minLength": 1},
                "uniqueItems": false
              }
            },
            "additionalProperties": true
        }
      },
      "additionalProperties": true
    }
  }
}
