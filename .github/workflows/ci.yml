name: CI (Unit + Integ/Smoke)

on:
  push:
    branches: [ main, chore/**, feature/** ]
  pull_request:
    branches: [ main ]

permissions:
  contents: read
  actions: read
  checks: read

env:
  LANG: C.UTF-8
  LC_ALL: C.UTF-8

defaults:
  run:
    shell: bash

jobs:
  jobname_manifest:
    if: always()
    runs-on: ubuntu-latest
    steps:
      - name: Publish canonical Required job names
        run: |
          printf "Required job names (copy these into Branch Protection):\n" | tee -a "$GITHUB_STEP_SUMMARY"
          printf "unit-python\nunit-js\ngolden snapshot\ndocker-build-smoke\nsmoke\n" | tee -a "$GITHUB_STEP_SUMMARY"
  diag:
    if: always()
    runs-on: ubuntu-latest
    steps:
       'UTF8 OK: \\xE2\\x9C\\x85\\n'